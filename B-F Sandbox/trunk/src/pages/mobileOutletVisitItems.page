<apex:page standardController="Outlet_Visit__c" extensions="outletVisit_Controller" standardStylesheets="false" tabstyle="Outlet_Visit__c" showHeader="false" sidebar="false">
<meta name="viewport" content="width=320; initial-scale=1.0; maximum-scale=1.0; 
           user-scalable=0;"/>
           
<style type="text/css">
.tab {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 11px;
    color: #3574aa;
    font-weight: bold;
    text-align: center;
    height: 25px;
    width: 125px;
    line-height:25px;
    text-decoration:none;
    display:block;
    background-position: center bottom;
    vertical-align: bottom;
    background-color: #bbecfa;
    border: 1px solid #FFFFFF;
     }
    


.tab_selected {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 11px;
    color: #ffffff;
    font-weight: bold;
    text-align: center;
    height: 25px;
    width: 137px;
    line-height:25px;
    text-decoration:none;
    display:block;
    background-image: none;
    background-repeat: no-repeat;
    background-position: center;
    vertical-align: bottom;
    padding-top:0px;
    background-color: #0bb7df;
    border: 1px solid #FFFFFF;
     } 
.labelCol {
    font-weight: bold;
    width: 30%;
}
.data2ColEntry {
    width: 50px;
}
</style> 

<apex:outputpanel rendered="{!$CurrentPage.parameters.view='Main'}">
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Main" id="M1" class="tab_selected">Main</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices" id="M2" class="tab">Prices</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion" id="M3" class="tab">Depletion</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=KeyTasks" id="M4" class="tab">Key Tasks</a></td>          
          </tr>
    </table>
</apex:outputpanel>
<apex:outputpanel rendered="{!$CurrentPage.parameters.view='Prices'}">
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Main" id="P" class="tab">Main</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices" id="P2" class="tab_selected">Prices</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion" id="P3" class="tab">Depletion</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=KeyTasks" id="P4" class="tab">Key Tasks</a></td>
          </tr>
    </table>
    <apex:outputpanel rendered="{!$CurrentPage.parameters.type!='Comp'}">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices&type=BF" id="PBF" class="tab_selected">B-F Brands</a></td>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices&type=Comp" id="PComp" class="tab">Competitor Brands</a></td>
              </tr>
        </table>
    </apex:outputpanel>     
    <apex:outputpanel rendered="{!$CurrentPage.parameters.type='Comp'}">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices&type=BF" id="PBF" class="tab">B-F Brands</a></td>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices&type=Comp" id="PComp" class="tab_selected">Competitor Brands</a></td>
              </tr>
        </table>        
    </apex:outputpanel>     
</apex:outputpanel>
<apex:outputpanel rendered="{!$CurrentPage.parameters.view='Depletion'}">
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Main" id="D1" class="tab">Main</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices" id="D2" class="tab">Prices</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion" id="D3" class="tab_selected">Depletion</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=KeyTasks" id="D4" class="tab">Key Tasks</a></td>
          </tr>
    </table>
    <apex:outputpanel rendered="{!$CurrentPage.parameters.type!='Comp'}">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion&type=BF" id="PBF" class="tab_selected">B-F Brands</a></td>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion&type=Comp" id="PComp" class="tab">Competitor Brands</a></td>
              </tr>
        </table>
    </apex:outputpanel>     
    <apex:outputpanel rendered="{!$CurrentPage.parameters.type='Comp'}">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion&type=BF" id="PBF" class="tab">B-F Brands</a></td>
                <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion&type=Comp" id="PComp" class="tab_selected">Competitor Brands</a></td>
              </tr>
        </table>        
    </apex:outputpanel>         
</apex:outputpanel>
<apex:outputpanel rendered="{!$CurrentPage.parameters.view='KeyTasks'}">
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Main" id="K1" class="tab">Main</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Prices" id="K2" class="tab">Prices</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=Depletion" id="K3" class="tab">Depletion</a></td>
            <td><a href="https://na1.salesforce.com/apex/mobileOutletVisitItems?ID={!$CurrentPage.parameters.ID}&view=KeyTasks" id="K4" class="tab_selected">Key Tasks</a></td>
          </tr>
    </table>
</apex:outputpanel>

<apex:form >    
    <apex:outputpanel rendered="{!$CurrentPage.parameters.view='Main'}">

      
        <div class="apexp">
        <div class="individualPalette">
        <div class="customnotabBlock">
        <div class="editPage">
        <div id="j_id0:j_id10:pb" class="bPageBlock bEditBlock secondaryPalette">
            <div class="pbHeader">
                <table border="0" cellpadding="0" cellspacing="0">
                <tr><td class="pbTitle"><h2 class="mainTitle">{!$ObjectType.Outlet_Visit__c.Label}</h2></td>
                <td>&nbsp;</td>
                </tr></table>
            </div>
        <div class="pbBody">
        <div id="j_id0:j_id10:pb:s2">
        <div class="pbSubsection">
        <table class="detailList" border="0" cellpadding="0" cellspacing="0">
        
        <tr><td class="labelCol">
        <apex:outputLabel value="{!$ObjectType.Outlet_Visit__c.fields.Account__c.label}" for="Account1"/>
        </td><td class="data2Col  first ">
        <apex:outputtext id="Account1" value="{!Outlet_Visit__c.Account__r.Name}"/></td></tr>
        
        <tr><td class="labelCol">
        <apex:outputLabel value="{!$ObjectType.Outlet_Visit__c.fields.Visit_Date__c.label}" for="visitDate"/>
        </td><td class="data2Col  first ">
            <apex:outputText id="visitDate" value="{0,date,M/d/yyyy}">
                <apex:param value="{!Outlet_Visit__c.Visit_Date__c}" />
            </apex:outputText>
        </td></tr>
        
        <tr><td class="labelCol">
        <apex:outputLabel value="{!$ObjectType.Outlet_Visit__c.fields.CurrencyIsoCode.label}" for="currency"/>
        </td><td class="data2Col  first ">
        <apex:outputtext id="currency" value="{!Outlet_Visit__c.CurrencyIsoCode}"/></td></tr>
        
        <tr><td class="labelCol">
        <apex:outputLabel value="{!$ObjectType.Outlet_Visit__c.fields.Met_With__c.label}" for="contact"/>
        </td><td class="data2Col  first ">
        <apex:outputtext id="contact" value="{!Outlet_Visit__c.Met_With__r.Name}"/></td></tr>
        
        <tr><td class="labelCol">
        <apex:outputLabel value="{!$ObjectType.Outlet_Visit__c.fields.Visit_Comments__c.label}" for="comments"/>
        </td><td class="data2Col  first ">
        <apex:inputtextarea id="comments" value="{!Outlet_Visit__c.Visit_Comments__c}"/></td></tr>
        
        <tr><td class="labelCol">
        <apex:outputLabel value="{!$ObjectType.Outlet_Visit__c.fields.Competitor_Activity__c.label}" for="oCompetitorAct"/>
        </td><td class="data2Col  first ">
        <apex:inputtextarea id="oCompetitorAct" value="{!Outlet_Visit__c.Competitor_Activity__c}"/></td></tr>
        
        
        </table>
        </div></div></div><div class="pbFooter secondaryPalette">
        <div class="bg"></div></div></div></div></div></div></div>  
    </apex:outputpanel>

    <apex:outputpanel rendered="{!$CurrentPage.parameters.view='Prices'}">    

<!--Filter Section -->
        <div class="apexp">
        <div class="individualPalette">
        <div class="customnotabBlock">
        <div class="editPage">
        <div  class="bPageBlock bEditBlock secondaryPalette">
            <div class="pbHeader">
                <table border="0" cellpadding="0" cellspacing="0">
                <tr><td class="pbTitle"><h2 class="mainTitle"></h2></td>
                <td>&nbsp;</td>
                </tr></table>
            </div>
        <div class="pbBody">
        <div >
        <div class="pbSubsection">
        <table class="detailList" border="0" cellpadding="0" cellspacing="0">
        
        <tr><td class="labelCol">
        <apex:outputLabel value="{!$ObjectType.Brand__c.fields.Spirit_Type__c.label}" for="SpiritType"/>
        </td><td class="data2Col  first ">
               <apex:selectList value="{!SpiritType}"  size="1" id="SpiritType" >
                      <apex:selectOptions value="{!SpiritTypeList}"/>
               </apex:selectList>  
        </td></tr>
        
        <apex:outputpanel rendered="{!$CurrentPage.parameters.type!='Comp'}">
            <tr><td class="labelCol">
            <apex:outputLabel value="B-F {!$ObjectType.Brand__c.labelplural}" for="BFBrand"/>
            </td><td class="data2Col  first ">
                   <apex:selectList value="{!BFBrand}"  size="1" id="BFBrand" >
                          <apex:selectOptions value="{!BFBrandsList}"/>
                   </apex:selectList>  
            </td></tr>
        </apex:outputpanel>
        
        <apex:outputpanel rendered="{!$CurrentPage.parameters.type='Comp'}">
            <tr><td class="labelCol">
            <apex:outputLabel value="Competitor {!$ObjectType.Brand__c.labelplural}" for="CompBrand"/>
            </td><td class="data2Col  first ">
                   <apex:selectList value="{!CompBrand}"  size="1" id="CompBrand" >
                          <apex:selectOptions value="{!CompBrandsList}"/>
                   </apex:selectList>  
            </td></tr>
        </apex:outputpanel>
        
        <tr><td class="labelCol">
            <apex:commandButton action="{!saveCommit}" value="{!$Label.OutletVisitPage_FilterButtonLabel}" />
        </td>
        
        </tr>
        </table>
        </div></div></div><div class="pbFooter secondaryPalette">
        <div class="bg"></div></div></div></div></div></div></div>  

<!-- B-F Brand Grid Section -->
        <apex:outputpanel rendered="{!NOT ISNULL(myBFOvi) && $CurrentPage.parameters.type!='Comp'}">
            <div class="apexp">
            <div class="individualPalette">
            <div class="customnotabBlock">
            <div class="editPage">
            <div id="j_id0:j_id10:pb" class="bPageBlock bEditBlock secondaryPalette">
                <div class="pbHeader">
                    <table border="0" cellpadding="0" cellspacing="0">
                    <tr><td class="pbTitle"><h2 class="mainTitle">{!$Label.OutletVisitPage_B_FSectionLabel}</h2></td>
                    <td>&nbsp;</td>
                    </tr></table>
                </div>
            <div class="pbBody">
            <div id="j_id0:j_id10:pb:s2">
            <div class="pbSubsection">
            <apex:commandButton style="width:125px;" action="{!saveCommit}" value="{!$Label.OutletVisitPage_SaveButtonLabel}" rendered="{!showDetails}" />
            
            <table class="detailList" border="0" cellpadding="0" cellspacing="0">
                
                <th>{!$ObjectType.Product__c.fields.Name.label}</th>
                
                <apex:repeat value="{!myBFOvi}" var="p">
                    <tr>
                                    <hr></hr>                       
                    <td class="data2Col  first ">
                    <apex:outputtext value="{!p.prod.Name}"/></td></tr>
                
                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$ObjectType.Outlet_Visit_Item__c.fields.Bottle_Price__c.label}" for="bp"/>
                    </td><td class="data2Col  first ">
                    <apex:inputtext id="bp" value="{!p.ovi.Bottle_Price__c}"/></td></tr>

                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$Label.OutletVisitPage_SpecialLabel}" for="bps"/>
                    </td><td class="data2Col  first ">
                    <apex:inputCheckbox id="bps" value="{!p.ovi.Bottle_Price_Special__c}"/></td></tr>

                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$ObjectType.Outlet_Visit_Item__c.fields.Drink_Price__c.label}" for="dp"/>
                    </td><td class="data2Col  first ">
                    <apex:inputtext id="dp" value="{!p.ovi.Drink_Price__c}"/></td></tr>

                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$Label.OutletVisitPage_SpecialLabel}" for="dps"/>
                    </td><td class="data2Col  first ">
                    <apex:inputCheckbox id="dps" value="{!p.ovi.Drink_Price_Special__c}"/></td></tr>            
                </apex:repeat>
            </table>
            </div></div></div><div class="pbFooter secondaryPalette">
            <div class="bg"></div></div></div></div></div></div></div>  
        </apex:outputpanel>
<!-- Comp Brand Grid Section -->
        <apex:outputpanel rendered="{!NOT ISNULL(myCompOvi) && $CurrentPage.parameters.type='Comp'}">
            <div class="apexp">
            <div class="individualPalette">
            <div class="customnotabBlock">
            <div class="editPage">
            <div id="j_id0:j_id10:pb" class="bPageBlock bEditBlock secondaryPalette">
                <div class="pbHeader">
                    <table border="0" cellpadding="0" cellspacing="0">
                    <tr><td class="pbTitle"><h2 class="mainTitle">{!$Label.OutletVisitPage_CompSectionLabel}</h2></td>
                    <td>&nbsp;</td>
                    </tr></table>
                </div>
            <div class="pbBody">
            <div id="j_id0:j_id10:pb:s2">
            <div class="pbSubsection">
            <apex:commandButton style="width:125px;" action="{!saveCommit}" value="{!$Label.OutletVisitPage_SaveButtonLabel}" rendered="{!showDetails}" />
            
            <table class="detailList" border="0" cellpadding="0" cellspacing="0">
            
                <th>{!$ObjectType.Product__c.fields.Name.label}</th>
                
                <apex:repeat value="{!myCompOvi}" var="p">
                    <tr>
                                    <hr></hr>                       
                    <td class="data2Col  first ">
                    <apex:outputtext value="{!p.prod.Name}"/></td></tr>
                
                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$ObjectType.Outlet_Visit_Item__c.fields.Bottle_Price__c.label}" for="bp"/>
                    </td><td class="data2Col  first ">
                    <apex:inputtext id="bp" value="{!p.ovi.Bottle_Price__c}"/></td></tr>

                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$Label.OutletVisitPage_SpecialLabel}" for="bps"/>
                    </td><td class="data2Col  first ">
                    <apex:inputCheckbox id="bps" value="{!p.ovi.Bottle_Price_Special__c}"/></td></tr>

                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$ObjectType.Outlet_Visit_Item__c.fields.Drink_Price__c.label}" for="dp"/>
                    </td><td class="data2Col  first ">
                    <apex:inputtext id="dp" value="{!p.ovi.Drink_Price__c}"/></td></tr>

                    <tr><td class="labelCol">
                    <apex:outputLabel value="{!$Label.OutletVisitPage_SpecialLabel}" for="dps"/>
                    </td><td class="data2Col  first ">
                    <apex:inputCheckbox id="dps" value="{!p.ovi.Drink_Price_Special__c}"/></td></tr>            
                </apex:repeat>
            </table>
            </div></div></div><div class="pbFooter secondaryPalette">
            <div class="bg"></div></div></div></div></div></div></div>  
        </apex:outputpanel>     
    </apex:outputpanel>

<!-- Depletion Tab -->
    <apex:outputpanel rendered="{!$CurrentPage.parameters.view='Depletion'}">     

    <!--Filter Section -->
            <div class="apexp">
            <div class="individualPalette">
            <div class="customnotabBlock">
            <div class="editPage">
            <div  class="bPageBlock bEditBlock secondaryPalette">
                <div class="pbHeader">
                    <table border="0" cellpadding="0" cellspacing="0">
                    <tr><td class="pbTitle"><h2 class="mainTitle"></h2></td>
                    <td>&nbsp;</td>
                    </tr></table>
                </div>
            <div class="pbBody">
            <div >
            <div class="pbSubsection">
            <table class="detailList" border="0" cellpadding="0" cellspacing="0">
            
            <tr><td class="labelCol">
            <apex:outputLabel value="{!$ObjectType.Brand__c.fields.Spirit_Type__c.label}" for="SpiritType2"/>
            </td><td class="data2Col  first ">
                   <apex:selectList value="{!SpiritType}"  size="1" id="SpiritType2" >
                          <apex:selectOptions value="{!SpiritTypeList}"/>
                   </apex:selectList>  
            </td></tr>
        
            <apex:outputpanel rendered="{!$CurrentPage.parameters.type!='Comp'}">
                <tr><td class="labelCol">
                <apex:outputLabel value="B-F {!$ObjectType.Brand__c.labelplural}" for="BFBrand2"/>
                </td><td class="data2Col  first ">
                       <apex:selectList value="{!BFBrand}"  size="1" id="BFBrand2" >
                              <apex:selectOptions value="{!BFBrandsList}"/>
                       </apex:selectList>  
                </td></tr>
            </apex:outputpanel>
            
            <apex:outputpanel rendered="{!$CurrentPage.parameters.type='Comp'}">
                <tr><td class="labelCol">
                <apex:outputLabel value="Competitor {!$ObjectType.Brand__c.labelplural}" for="CompBrand2"/>
                </td><td class="data2Col  first ">
                       <apex:selectList value="{!CompBrand}"  size="1" id="CompBrand2" >
                              <apex:selectOptions value="{!CompBrandsList}"/>
                       </apex:selectList>  
                </td></tr>
            </apex:outputpanel>
            
            <tr><td class="labelCol">
                <apex:commandButton action="{!saveCommit}" value="{!$Label.OutletVisitPage_FilterButtonLabel}" />
            </td>
            
            </tr>
            </table>
            </div></div></div><div class="pbFooter secondaryPalette">
            <div class="bg"></div></div></div></div></div></div></div>  

<!-- B-F Brand Grid Section -->
        <apex:outputpanel rendered="{!NOT ISNULL(myBFOvi) && $CurrentPage.parameters.type!='Comp'}">
            <div class="apexp">
            <div class="individualPalette">
            <div class="customnotabBlock">
            <div class="editPage">
            <div id="j_id0:j_id10:pb" class="bPageBlock bEditBlock secondaryPalette">
                <div class="pbHeader">
                    <table border="0" cellpadding="0" cellspacing="0">
                    <tr><td class="pbTitle"><h2 class="mainTitle">{!$Label.OutletVisitPage_B_FSectionLabel}</h2></td>
                    <td>&nbsp;</td>
                    </tr></table>
                </div>
            <div class="pbBody">
            <div id="j_id0:j_id10:pb:s2">
            <div class="pbSubsection">
            <apex:commandButton style="width:125px;" action="{!saveCommit}" value="{!$Label.OutletVisitPage_SaveButtonLabel}" rendered="{!showDetails}" />
            
            <table class="detailList" border="0" cellpadding="0" cellspacing="0">
            
                <th>{!$ObjectType.Product__c.fields.Name.label}</th>
                
                <apex:repeat value="{!myBFOvi}" var="p">
                    <tr>
                                    <hr></hr>                       
                    <td class="data2Col  first ">
                    <apex:outputtext value="{!p.prod.Name}"/></td></tr>
                
                    <tr><td class="labelCol">
                                <apex:outputText value="{0,date,M/yyyy}">
                                     <apex:param value="{!date1}" />
                                 </apex:outputText> 
                    </td><td class="data2Col  first ">
                    <apex:inputtext value="{!p.dep1.Bottles__c}"/></td></tr>

                    <tr><td class="labelCol">
                                <apex:outputText value="{0,date,M/yyyy}">
                                     <apex:param value="{!date2}" />
                                 </apex:outputText> 
                    </td><td class="data2Col  first ">
                    <apex:inputtext value="{!p.dep2.Bottles__c}"/></td></tr>

                    <tr><td class="labelCol">
                                <apex:outputText value="{0,date,M/yyyy}">
                                     <apex:param value="{!date3}" />
                                 </apex:outputText> 
                    </td><td class="data2Col  first ">
                    <apex:inputtext value="{!p.dep1.Bottles__c}"/></td></tr>
        
                </apex:repeat>
            </table>
            </div></div></div><div class="pbFooter secondaryPalette">
            <div class="bg"></div></div></div></div></div></div></div>  
        </apex:outputpanel>
        
<!-- Comp Brand Grid Section -->
        <apex:outputpanel rendered="{!NOT ISNULL(myCompOvi) && $CurrentPage.parameters.type='Comp'}">
            <div class="apexp">
            <div class="individualPalette">
            <div class="customnotabBlock">
            <div class="editPage">
            <div id="j_id0:j_id10:pb" class="bPageBlock bEditBlock secondaryPalette">
                <div class="pbHeader">
                    <table border="0" cellpadding="0" cellspacing="0">
                    <tr><td class="pbTitle"><h2 class="mainTitle">{!$Label.OutletVisitPage_CompSectionLabel}</h2></td>
                    <td>&nbsp;</td>
                    </tr></table>
                </div>
            <div class="pbBody">
            <div id="j_id0:j_id10:pb:s2">
            <div class="pbSubsection">
            <apex:commandButton style="width:125px;" action="{!saveCommit}" value="{!$Label.OutletVisitPage_SaveButtonLabel}" rendered="{!showDetails}" />
            
            <table class="detailList" border="0" cellpadding="0" cellspacing="0">
            
                <th>{!$ObjectType.Product__c.fields.Name.label}</th>
                
                <apex:repeat value="{!myCompOvi}" var="p">
                    <tr>
                                    <hr></hr>                       
                    <td class="data2Col  first ">
                    <apex:outputtext value="{!p.prod.Name}"/></td></tr>
                
                    <tr><td class="labelCol">
                                <apex:outputText value="{0,date,M/yyyy}">
                                     <apex:param value="{!date1}" />
                                 </apex:outputText> 
                    </td><td class="data2Col  first ">
                    <apex:inputtext value="{!p.dep1.Bottles__c}"/></td></tr>

                    <tr><td class="labelCol">
                                <apex:outputText value="{0,date,M/yyyy}">
                                     <apex:param value="{!date2}" />
                                 </apex:outputText> 
                    </td><td class="data2Col  first ">
                    <apex:inputtext value="{!p.dep2.Bottles__c}"/></td></tr>

                    <tr><td class="labelCol">
                                <apex:outputText value="{0,date,M/yyyy}">
                                     <apex:param value="{!date3}" />
                                 </apex:outputText> 
                    </td><td class="data2Col  first ">
                    <apex:inputtext value="{!p.dep1.Bottles__c}"/></td></tr>
        
                </apex:repeat>
            </table>
            </div></div></div><div class="pbFooter secondaryPalette">
            <div class="bg"></div></div></div></div></div></div></div>  
        </apex:outputpanel>
                
    </apex:outputpanel>

    <apex:outputpanel rendered="{!$CurrentPage.parameters.view='KeyTasks'}">     
<!-- START Key Task New/Edit Section -->  
            <div class="apexp">
            <div class="individualPalette">
            <div class="customnotabBlock">
            <div class="editPage">
            <div id="j_id0:j_id10:pb" class="bPageBlock bEditBlock secondaryPalette">
                <div class="pbHeader">
                    <table border="0" cellpadding="0" cellspacing="0">
                    <tr><td class="pbTitle"><h2 class="mainTitle">{!$ObjectType.Key_Task__c.LabelPlural}</h2></td>
                    <td>&nbsp;</td>
                    </tr></table>
                </div>
            <div class="pbBody">
            <div id="j_id0:j_id10:pb:s2">
            <div class="pbSubsection">
            <apex:commandButton style="width:125px;" action="{!saveCommit}" value="{!$Label.OutletVisitPage_SaveButtonLabel}" rendered="{!showDetails}" />
            
            <table class="detailList" border="0" cellpadding="0" cellspacing="0">
            
                <apex:repeat value="{!myKTs}" var="p">
                    <tr>
                                    <hr></hr>   
                    <td class="labelCol">
                        &nbsp;
                    </td>                   
                    <td class="data2Col  first ">
                    <apex:inputcheckbox value="{!p.selected}"/></td></tr>
                
                    <tr><td class="labelCol">
                        
                    </td><td class="data2Col  first ">
                    <apex:outputtext value="{!p.ktt.Name}"/></td></tr>

                    <tr><td class="labelCol">
                        {!$ObjectType.Key_Task__c.fields.Met_With__c.label}
                    </td><td class="data2Col  first ">
                         <apex:selectList value="{!p.kt.Met_With__c}" style="width:100;" size="1" id="ktContact" required="true">
                             <apex:selectOptions value="{!Contacts}"/>
                         </apex:selectList>   
                     </td></tr>

                    <tr><td class="labelCol">
                        {!$ObjectType.Key_Task__c.fields.Comments__c.label}
                    </td><td class="data2Col  first ">
                    <apex:inputtextarea value="{!p.kt.Comments__c}"/></td></tr>
                </apex:repeat>
            </table>
            </div></div></div><div class="pbFooter secondaryPalette">
            <div class="bg"></div></div></div></div></div></div></div>           
<!-- END Key Task New/Edit Section -->
    </apex:outputpanel> 
    
            
</apex:form>    
<apex:outputText value="{!Outlet_Visit__c.Account__r.Name}{!Outlet_Visit__c.Account__c}{!Outlet_Visit__c.Visit_Date__c}" rendered="false" />            
</apex:page>